(function(){var Config={};c1(Config,ASJS.AbstractModel);var JSONLoader=c0(ASJS.Loader,null,function(v0){v0.new=function(){v0.responseType="json";}});var DataProxy={};c1(DataProxy,ASJS.BaseClass,null,function(v2){v2.loadJSON=function(v0){var v1=new ASJS.Promise();var v3=new JSONLoader();v3.method=ASJS.RequestMethod.GET;v3.addEventListener(ASJS.LoaderEvent.LOAD,function(e){v1.resolve(v3.content);});v3.addEventListener(ASJS.LoaderEvent.ERROR,function(e){v1.reject(v3.content);});v3.load(v0);return v1;};v2.loadAnimation=function(v0){return(new ASJS.AnimationLoader()).load(v0);}});var ConfigLoaderCommand=c0(ASJS.AbstractCommand,null,function(v0){var v1=Config.instance();var v4=DataProxy.instance();v0.execute=function(){var v2=v4.loadJSON("json/config.json");v2.done(function(v3){v1.data=v3;});return v2;}});var Language={};c1(Language,ASJS.AbstractModel,null,function(v1,v2){prop(v1,"supportedLanguages",{get:function(){return v2.data.supportedLanguages;}});prop(v1,"selectedLanguage",{get:function(){return v2.data.selectedLanguage;}});v1.getText=function(k){var i=v1.get("elements")[k];return i!=null&&i[v1.selectedLanguage]!=undefined?i[v1.selectedLanguage]:"";};v1.genText=function(v0){for(var k in v1.data)v0=v0.split("{{"+k+"}}").join(v1.getText(k));return v0;}});var LanguageLoaderCommand=c0(ASJS.AbstractCommand,null,function(v0){var v3=Language.instance();var v4=DataProxy.instance();v0.execute=function(){var v1=v4.loadJSON("json/language.json");v1.done(function(v2){v3.data=v2;});return v1;}});var Tools={};roFunc(Tools,"replaceText",function(s,o){var r=/{{.*?}}/g;var rt=s;var m;while((m=r.exec(s))!==null){if(m.index===r.lastIndex)r.lastIndex++;var e=m[0].split("{{").join("").split("}}").join("");var c=Tools.ref(o,e);rt=rt.replace(m[0],c!=null?c:m[0]);};return rt;});roFunc(Tools,"ref",function(o,s){return s.split(".").reduce(function(o,x){return o[x];},o);});roFunc(Tools,"isValidEmailAddress",function(v2){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(v2);});roFunc(Tools,"getURLParams",function(param){var v0=decodeURIComponent(ASJS.Window.instance().location.href).split("#");if(v0[1]==''||v0[1]==undefined)return[];var v3=v0[1].split('&');var i=-1;var l=v3.length;var v5={};while(++i<l){var v1=v3[i].split('=');v5[v1[0]]=v1[1];};return v5[param];});roFunc(Tools,"createUrlParams",function(v3,reload){var v0="";for(var k in v3){if(v0!="")v0+="&";v0+=k+"="+v3[k];};var v4=ASJS.Window.instance();v4.location.href=v4.location.href.split(v4.location.hash).join("")+"#"+v0;if(reload)Tools.reload();});roFunc(Tools,"reload",function(){ASJS.Window.instance().location.reload(true);});var Cookies={};c1(Cookies,ASJS.BaseClass,null,function(v1){v1.createCookie=function(n,v,d){if(d){var v0=new Date();v0.setTime(v0.getTime()+(d*86400000));var v3="; expires="+v0.toGMTString();}else var v3="";document.cookie=n+"="+v+v3+"; path=/";try{if(typeof(Storage)!=="undefined")localStorage.setItem(n,v);}catch(e){trc(e);}};v1.readCookie=function(n){var v2=n+"=";var ca=document.cookie.split(';');var i=-1;var l=ca.length;while(++i<l){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(v2)==0)return c.substring(v2.length,c.length);};try{if(typeof(Storage)!=="undefined")return localStorage.getItem(n);}catch(e){trc(e);};return null;};v1.eraseCookie=function(n){v1.createCookie(n,"",-1);try{if(typeof(Storage)!=="undefined")localStorage.removeItem(n);}catch(e){trc(e);}}});var EnvironmentCommand=c0(ASJS.AbstractCommand,null,function(v0){var v1=ASJS.Window.instance();var v5=Language.instance();var v4=Cookies.instance();var v2=ASJS.Cycler.instance();var v3=Config.instance();var v11;v0.execute=function(){v9();v8();v7();};function v9(){var v12=Tools.getURLParams('lang');if(v12==undefined||v5.supportedLanguages.indexOf(v12)==-1)v12=v4.readCookie('language');if(v12==undefined||v5.supportedLanguages.indexOf(v12)==-1)v12=v5.selectedLanguage;v5.set("selectedLanguage",v12);v4.createCookie('language',v5.selectedLanguage);stage.title=v5.getText("title");};function v8(){v2.fps=v3.get("fps");v2.start();};function v7(){stage.addEventListener(ASJS.Stage.RESIZE,v10);};function v10(){v11=v1.clearTimeout(v11);v11=v1.setTimeout(v6,v3.get("resizeInterval"));};function v6(){v11=v1.clearTimeout(v11);v0.sendNotification(ASJS.Stage.RESIZE);}});var AbstractResizeMediator=c0(ASJS.AbstractMediator,null,function(v2,v3,v4){v4.handlers=[ASJS.Stage.RESIZE];v2.reciveNotification=function(v0,v1){switch(v0){case ASJS.Stage.RESIZE:v4.onResize();break;}};v4.onResize=function(){}});var AbstractView=c0(ASJS.Sprite,null,function(v0,v1,v3){var v5={alpha:0};var v2=new ASJS.Easing();v0.new=function(){v0.addEventListener(ASJS.Stage.ADDED_TO_STAGE,v4);};v3.animateTo=function(to,v6){v5={alpha:v0.alpha};v2.stop();v2.play(v5,{alpha:to},1000,"easeInOutExpo",function(){v0.alpha=v5.alpha;},v6);};function v4(){v0.alpha=0;v3.animateTo(1);}});var ContentView=c0(AbstractView,null,function(v4){var v2={};cnst(v2,"ANIMATION_EXPLODE_ID","animationExplode");cnst(v2,"ANIMATION_FIREWORKS_ID","animationFireworks");var v9=Language.instance();var v6=ASJS.Mouse.instance();var v12=new ASJS.Sprite();var v0=new ASJS.Sprite();var v5=new ASJS.Label();var v7=new ASJS.Button();var v16=new ASJS.AnimatedSprite();var v3=false;var v11=new ASJS.BlurFilter();v4.new=function(){v4.addEventListener(ASJS.Stage.ADDED_TO_STAGE,v13);};v4.render=function(){v12.setSize(stage.stageWidth,stage.stageHeight);v0.x=(stage.stageWidth-v0.width)*0.5;};v4.init=function(v1){v12.addClass("content-view--background");v12.setCSS("position","fixed");v12.alpha=0.5;v4.addChild(v12);v0.addClass("content-view--box");v0.setSize(320,130);v0.y=100;v4.addChild(v0);v5.text=v9.getText("new_asjs_base_site");v5.addClass("content-view--box--label");v5.setSize(320,30);v5.move(0,34);v0.addChild(v5);v7.label=v9.getText("show_notification_window");v7.addClass("content-view--box--button");v7.setSize(320,40);v7.move(0,v0.height-v7.height);v7.addEventListener(ASJS.MouseEvent.CLICK,v15);v0.addChild(v7);v16.addAnimationDescriptorList(v1);v16.move(10,10);v4.addChild(v16);v16.addEventListener(ASJS.MouseEvent.CLICK,v19);v16.addEventListener(ASJS.MouseEvent.MOUSE_DOWN+" "+ASJS.MouseEvent.TOUCH_START,v21);stage.addEventListener(ASJS.MouseEvent.MOUSE_UP+" "+ASJS.MouseEvent.TOUCH_END,v10);stage.addEventListener(ASJS.MouseEvent.MOUSE_LEAVE,v10);stage.addEventListener(ASJS.MouseEvent.MOUSE_MOVE+" "+ASJS.MouseEvent.TOUCH_MOVE,v17);v4.addEventListener(ASJS.MouseEvent.CLICK,v14);v4.render();};function v13(){v20();};function v15(){v4.dispatchEvent(ContentMediator.ON_SHOW_NOTIFICATION_WINDOW_CLICK);};function v18(){if(!v16)return;v16.setSize(256,128);v16.play(v2.ANIMATION_EXPLODE_ID,ASJS.AnimatedSprite.PLAY_REVERSE);};function v20(){if(!v16)return;v16.setSize(200,200);v16.play(v2.ANIMATION_FIREWORKS_ID);};function v19(){if(v16.selectedAnimation==v2.ANIMATION_FIREWORKS_ID)v18();else v20();};function v21(){v3=true;};function v10(){v3=false;};function v17(){v11.value=(Math.max(0,stage.stageHeight/(stage.stageHeight-v6.mouseY))/10);v4.filters=[v11];if(!v3)return;v16.move(v6.mouseX-v16.width*0.5,v6.mouseY-v16.height*0.5);};function v14(){var v8=v0.hitTest(new ASJS.Point(v6.mouseX,v6.mouseY));v5.text=v9.getText(v8?"hit_test_inside":"hit_test_outside");}});var NotificationWindowView=c0(AbstractView,null,function(v0,v1,v7){var v13={};var v4=new ASJS.Scale9Grid();var v2=new ASJS.Sprite();var v5=new ASJS.Sprite();var v6=new ASJS.Button();var v9=new ASJS.Button();v0.new=function(){v0.setCSS("background-color","rgba( 0, 0, 0, 0.4 )");v0.setCSS("position","fixed");v4.size=new ASJS.Point(30,80);v4.rect=new ASJS.Rectangle(13,60,4,7);v4.backgroundImage="images/window.png";v0.addChild(v4);v2.height=50;v2.setCSS("line-height",v2.height+"px");v2.addClass("notification-window-view--title-label");v0.addChild(v2);v5.addClass("notification-window-view--content-label");v0.addChild(v5);v6.addEventListener(ASJS.MouseEvent.CLICK,function(){v0.hideWindow();if(v13['okCallback']!=undefined)v13['okCallback']();});v11(v6);v9.addEventListener(ASJS.MouseEvent.CLICK,function(){v0.hideWindow();if(v13['cancelCallback']!=undefined)v13['cancelCallback']();});v11(v9);};v0.hideWindow=function(){v7.animateTo(0,function(){v0.dispatchEvent(NotificationWindowMediator.HIDE);v2.html="";v5.html="";if(v8())v0.removeChild(v6);v6.label="";if(v10())v0.removeChild(v9);v9.label="";});};v0.showWindow=function(v12){v13=v12;v2.html=v13.title;v5.html=v13.content;if(v13['showOk']){v6.label=v13['okLabel'];if(!v8())v0.addChild(v6);}else if(v8())v0.removeChild(v6);if(v13['showCancel']){v9.label=v13['cancelLabel'];if(!v10())v0.addChild(v9);}else if(v10())v0.removeChild(v9);};v0.render=function(){v0.setSize(stage.stageWidth,stage.stageHeight);v4.setSize(Math.max(150,Math.min(stage.stageWidth,v13.width)),Math.max(150,Math.min(stage.stageHeight,v13.height)));v4.move((stage.stageWidth-v4.width)*0.5,Math.max(0,(stage.stageHeight-v4.height)*0.5));v4.render();v2.move(v4.x+25,v4.y+10);v2.width=v4.width-50;v5.move(v2.x,v2.y+v2.height+25);v5.setSize(v2.width,v4.height-v2.height-55-(v8()||v10()?60:0));if(v5.render)v5.render();v6.width=v4.width*0.5-20;if(v8()){v6.x=v4.x+(v10()?v4.width*0.5-10-v6.width:((v4.width-v6.width)*0.5));v6.y=v4.y+v4.height-v6.height-30;};v9.width=v6.width;if(v10()){v9.x=v4.x+(v8()?v4.width*0.5+10:((v4.width-v9.width)*0.5));v9.y=v4.y+v4.height-v9.height-30;}};function v8(){return v0.contains(v6);};function v10(){return v0.contains(v9);};function v11(v3){v3.addClass("notification-window-view--button");v3.height=42;}});var NotificationWindowDataVo=c0(ASJS.BaseClass,null,function(v0){v0.new=function(){v0.title="";v0.content="";v0.showOk=true;v0.showCancel=false;v0.okCallback=null;v0.cancelCallback=null;v0.okLabel=null;v0.cancelLabel=null;v0.width=500;v0.height=200;}});var NotificationWindowMediator=c0(AbstractResizeMediator,null,function(v5,v6,v10){v10.handlers.push(NotificationWindowMediator.SHOW);var v8=Language.instance();var v12=true;var v4=[];var v7=false;var v13="";var v15="";var v16=new NotificationWindowView();v5.new=function(){v16.addEventListener(NotificationWindowMediator.HIDE,v3);v13=v8.getText('notification_ok_button');v15=v8.getText('notification_cancel_button');};v5.reciveNotification=function(v0,v1){v6.reciveNotification(v0,v1);switch(v0){case NotificationWindowMediator.SHOW:v2(v1);break;}};v10.onResize=function(){v12=true;if(!v10.view.contains(v16))return;v16.render();v12=false;};function v2(v1){if(v1==undefined)v1=new NotificationDataVo();if(!v1.okLabel)v1.okLabel=v13;if(!v1.cancelLabel)v1.cancelLabel=v15;v4.push(v1);if(!v7)v11();};function v3(){if(v4.length>0)v11();else v9();};function v9(){v10.view.removeChild(v16);v7=false;};function v11(){var v14=v4[0];v4.shift();v7=true;v16.showWindow(v14);if(!v10.view.contains(v16))v10.view.addChild(v16);if(v12)v10.onResize();}});cnst(NotificationWindowMediator,"SHOW","NotificationWindowMediator-show");cnst(NotificationWindowMediator,"HIDE","NotificationWindowMediator-hide");var ContentMediator=c0(AbstractResizeMediator,null,function(v2,v3,v6){v6.handlers.push(ContentMediator.SHOW);var v8=true;var v7=DataProxy.instance();var v5=Language.instance();var v9=new ContentView();v2.reciveNotification=function(v0,v1){v3.reciveNotification(v0,v1);switch(v0){case ContentMediator.SHOW:v4();break;}};v6.onResize=function(){v8=true;if(!v6.view.contains(v9))return;v9.render();v8=false;};function v10(v1){v9.init(v1);v6.view.addChild(v9);};function v4(){v9.addEventListener(ContentMediator.ON_SHOW_NOTIFICATION_WINDOW_CLICK,function(){var v11=new NotificationWindowDataVo();v11.title=v5.getText("notification_title");v11.content=v5.getText("notification_content");v11.height=230;v2.sendNotification(NotificationWindowMediator.SHOW,v11);});v7.loadAnimation("json/animation/contentAnimation.json").done(v10);if(v8)v6.onResize();}});cnst(ContentMediator,"SHOW","ContentMediator-show");cnst(ContentMediator,"ON_SHOW_NOTIFICATION_WINDOW_CLICK","ContentMediator-onShowNotificationWindowClick");var ViewPrepCommand=c0(ASJS.AbstractCommand,null,function(v1){v1.execute=function(v0){new ContentMediator(v0.contentView);new NotificationWindowMediator(v0.notificationWindowView);}});var StartupCommand=c0(ASJS.AbstractCommand,null,function(v2){var v1;v2.execute=function(v0){v1=v0;v3();};function v3(){(new ConfigLoaderCommand()).execute().done(v4);};function v4(){(new LanguageLoaderCommand()).execute().done(v5);};function v5(){(new EnvironmentCommand()).execute();(new ViewPrepCommand()).execute(v1);v2.sendNotification(ContentMediator.SHOW);}});var Application=c0(ASJS.BaseClass,null,function(v0){var v1=new ASJS.Sprite();var v2=new ASJS.Sprite();v0.new=function(){trc("<AS/JS> Application 2.17.06.10");stage.addChild(v0.contentView);stage.addChild(v0.notificationWindowView);(new StartupCommand()).execute(v0);};prop(v0,"contentView",{get:function(){return v1;}});prop(v0,"notificationWindowView",{get:function(){return v2;}});});ASJS.start(Application);})();