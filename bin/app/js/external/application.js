(function(){var Config={};c1(Config,ASJS.AbstractModel);var JSONLoader=c0(ASJS.Loader,null,function(v0){v0.new=function(){v0.responseType="json";}});var DataProxy={};c1(DataProxy,ASJS.BaseClass,null,function(v2){v2.loadJSON=function(v0){var v1=new ASJS.Promise();var v3=new JSONLoader();v3.method=ASJS.RequestMethod.GET;v3.addEventListener(ASJS.LoaderEvent.LOAD,function(e){v1.resolve(v3.content);});v3.addEventListener(ASJS.LoaderEvent.ERROR,function(e){v1.reject(v3.content);});v3.load(v0);return v1;};v2.loadAnimation=function(v0){return(new ASJS.AnimationLoader()).load(v0);}});var EConfigLoaderCommand=c0(ASJS.AbstractCommand,null,function(v0){var v1=Config.instance();var v4=DataProxy.instance();v0.execute=function(){var v2=v4.loadJSON("json/external/config.json");v2.done(function(v3){v1.data=v3;});return v2;}});var Language={};c1(Language,ASJS.AbstractModel,null,function(v1,v2){prop(v1,"supportedLanguages",{get:function(){return v2.data.supportedLanguages;}});prop(v1,"selectedLanguage",{get:function(){return v2.data.selectedLanguage;}});v1.getText=function(k){var i=v1.get("elements")[k];return i!=null&&i[v1.selectedLanguage]!=undefined?i[v1.selectedLanguage]:"";};v1.genText=function(v0){for(var k in v1.data)v0=v0.split("{{"+k+"}}").join(v1.getText(k));return v0;}});var ELanguageLoaderCommand=c0(ASJS.AbstractCommand,null,function(v0){var v3=Language.instance();var v4=DataProxy.instance();v0.execute=function(){var v1=v4.loadJSON("json/external/language.json");v1.done(function(v2){v3.data=v2;});return v1;}});var Tools={};roFunc(Tools,"replaceText",function(s,o){var r=/{{.*?}}/g;var rt=s;var m;while((m=r.exec(s))!==null){if(m.index===r.lastIndex)r.lastIndex++;var e=m[0].split("{{").join("").split("}}").join("");var c=Tools.ref(o,e);rt=rt.replace(m[0],c!=null?c:m[0]);};return rt;});roFunc(Tools,"ref",function(o,s){return s.split(".").reduce(function(o,x){return o[x];},o);});roFunc(Tools,"isValidEmailAddress",function(v2){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(v2);});roFunc(Tools,"getURLParams",function(param){var v0=decodeURIComponent(ASJS.Window.instance().location.href).split("#");if(v0[1]==''||v0[1]==undefined)return[];var v3=v0[1].split('&');var i=-1;var l=v3.length;var v5={};while(++i<l){var v1=v3[i].split('=');v5[v1[0]]=v1[1];};return v5[param];});roFunc(Tools,"createUrlParams",function(v3,reload){var v0="";for(var k in v3){if(v0!="")v0+="&";v0+=k+"="+v3[k];};var v4=ASJS.Window.instance();v4.location.href=v4.location.href.split(v4.location.hash).join("")+"#"+v0;if(reload)Tools.reload();});roFunc(Tools,"reload",function(){ASJS.Window.instance().location.reload(true);});var Cookies={};c1(Cookies,ASJS.BaseClass,null,function(v1){v1.createCookie=function(n,v,d){if(d){var v0=new Date();v0.setTime(v0.getTime()+(d*86400000));var v3="; expires="+v0.toGMTString();}else var v3="";document.cookie=n+"="+v+v3+"; path=/";try{if(typeof(Storage)!=="undefined")localStorage.setItem(n,v);}catch(e){trc(e);}};v1.readCookie=function(n){var v2=n+"=";var ca=document.cookie.split(';');var i=-1;var l=ca.length;while(++i<l){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(v2)==0)return c.substring(v2.length,c.length);};try{if(typeof(Storage)!=="undefined")return localStorage.getItem(n);}catch(e){trc(e);};return null;};v1.eraseCookie=function(n){v1.createCookie(n,"",-1);try{if(typeof(Storage)!=="undefined")localStorage.removeItem(n);}catch(e){trc(e);}}});var EEnvironmentCommand=c0(ASJS.AbstractCommand,null,function(v0){var v1=ASJS.Window.instance();var v5=Language.instance();var v4=Cookies.instance();var v2=ASJS.Cycler.instance();var v3=Config.instance();var v7;v0.execute=function(){v6();};function v6(){function v8(sl){return sl==undefined||v5.supportedLanguages.indexOf(sl)==-1;};var v9=Tools.getURLParams('lang');if(v8(v9))v9=v4.readCookie('language');if(v8(v9))v9=v5.selectedLanguage;v5.set("selectedLanguage",v9);v4.createCookie('language',v5.selectedLanguage);}});var AbstractResizeMediator=c0(ASJS.AbstractMediator,null,function(v3,v4,v5){v5.handlers=[ASJS.Stage.RESIZE];v5.forceResize=true;v3.reciveNotification=function(v0,v1){switch(v0){case ASJS.Stage.RESIZE:v5.onResize();break;}};v5.showView=function(){if(v5.forceResize)v5.onResize();};v5.onResize=function(){v5.forceResize=true;var v2=v5.view.getChildAt(0);if(v2==null)return;v2.render();v5.forceResize=false;}});var AbstractView=c0(ASJS.Sprite,null,function(v0,v1,v3){var v5={alpha:0};var v2=new ASJS.Easing();v0.new=function(){v0.addEventListener(ASJS.Stage.ADDED_TO_STAGE,v4);};v3.animateTo=function(to,v6){v5={alpha:v0.alpha};v2.stop();v2.play(v5,{alpha:to},1000,"easeInOutExpo",function(){v0.alpha=v5.alpha;},v6);};function v4(){v0.alpha=0;v3.animateTo(1);}});var EContentView=c0(AbstractView,null,function(v0){var v2=Language.instance();var v1;var v3=new ASJS.DisplayObject();v0.new=function(){v0.addEventListener(ASJS.Stage.ADDED_TO_STAGE,v4);v0.addEventListener(ASJS.Stage.REMOVED_FROM_STAGE,v5);v3.addClass("external-content-view--background");v0.addChild(v3);v0.render();};v0.render=function(){trc("external:",v2.getText("title"));if(!v1)return;v3.setSize(v1.width,v1.height);};function v4(){v1=v0.parent.parent;};function v5(){v1=null;}});var EContentMediator=c0(AbstractResizeMediator,null,function(v2,v3,v6){v6.handlers.push(EContentMediator.SHOW);var v7=new EContentView();v2.new=function(){};v2.reciveNotification=function(v0,v1){v3.reciveNotification(v0,v1);switch(v0){case EContentMediator.SHOW:v4();break;}};function v4(){if(!v6.view.contains(v7))v6.view.addChild(v7);v6.showView();};function v5(){if(v6.view.contains(v7))v6.view.removeChild(v7);}});cnst(EContentMediator,"SHOW","EContentMediator-show");var EViewPrepCommand=c0(ASJS.AbstractCommand,null,function(v1){v1.execute=function(v0){new EContentMediator(v0.contentView);}});var EStartupCommand=c0(ASJS.AbstractCommand,null,function(v2){var v1;v2.execute=function(v0){v1=v0;v3();};function v3(){(new EConfigLoaderCommand()).execute().done(v4);};function v4(){(new ELanguageLoaderCommand()).execute().done(v5);};function v5(){(new EEnvironmentCommand()).execute();(new EViewPrepCommand()).execute(v1);v2.sendNotification(EContentMediator.SHOW);}});var EApplication=c0(ASJS.Sprite,null,function(v0){var v2=new ASJS.Sprite();v0.new=function(){trc("<AS/JS> External Application");var v1=new ASJS.StyleLoader();v1.addEventListener(ASJS.LoaderEvent.LOAD,function(){v1.useStyle();(new EStartupCommand()).execute(v0);});v1.load("css/external/application.css");v0.addChild(v0.contentView);};prop(v0,"contentView",{get:function(){return v2;}});});ASJS.start(EApplication);})();